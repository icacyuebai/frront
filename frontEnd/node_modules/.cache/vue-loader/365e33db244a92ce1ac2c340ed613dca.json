{"remainingRequest":"/Users/movi/Desktop/current/frontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/movi/Desktop/current/frontEnd/src/views/event/index.vue?vue&type=template&id=62ef0e73&scoped=true&%3Astyle=%7Bpadding%3A0%7D&","dependencies":[{"path":"/Users/movi/Desktop/current/frontEnd/src/views/event/index.vue","mtime":1682047457766},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1651221196058},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1651221196058},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/babel-loader/lib/index.js","mtime":1669512949620},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1669512954316},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1651221196058},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/vue-loader/lib/index.js","mtime":1669512954316}],"contextDependencies":[],"result":["\n  <div>\n    <template v-if='$route.name === \"Event\"'>\n    <div class='search-term'>\n      <a-select\n        ref=\"select\"\n        v-model:value=\"type\"\n        placeholder=\"事故类型\"\n        :allowClear='true'\n        style=\"width: 120px;margin-right: 20px\"\n      >\n        <a-select-option value=\"中毒窒息\">中毒窒息</a-select-option>\n        <a-select-option value=\"压力容器\">压力容器</a-select-option>\n        <a-select-option value=\"坍塌事故\">坍塌事故</a-select-option>\n        <a-select-option value=\"机械伤害\">机械伤害</a-select-option>\n        <a-select-option value=\"淹溺事故\">淹溺事故</a-select-option>\n        <a-select-option value=\"火灾事故\">火灾事故</a-select-option>\n        <a-select-option value=\"灼烫事故\">灼烫事故</a-select-option>\n        <a-select-option value=\"爆炸事故\">爆炸事故</a-select-option>\n        <a-select-option value=\"物体打击\">物体打击</a-select-option>\n        <a-select-option value=\"矿山事故\">矿山事故</a-select-option>\n        <a-select-option value=\"空难事故\">空难事故</a-select-option>\n        <a-select-option value=\"起重事故\">起重事故</a-select-option>\n        <a-select-option value=\"起重伤害\">起重伤害</a-select-option>\n        <a-select-option value=\"车辆伤害\">车辆伤害</a-select-option>\n        <a-select-option value=\"锅炉事故\">锅炉事故</a-select-option>\n        <a-select-option value=\"高处坠落\">高处坠落</a-select-option>\n      </a-select>\n      <a-button @click='getTableData'>查询</a-button>\n      <a-button v-if='roleType===\"admin\"' class=\"right\" @click='showUploadModal'>上传</a-button>\n    </div>\n    <a-table :columns=\"columns\" :data-source=\"data\" :pagination=\"false\" >\n      <a slot=\"name\" slot-scope=\"text\">{{ text }}</a>\n      <span slot=\"action\" slot-scope=\"record\">\n        <a-button @click='detail(record.name)' type='link'>详情</a-button>\n        <a-divider type=\"vertical\" />\n        <a-button v-if='roleType===\"admin\"' @click='bindUsers(record.name)' type='link'>分配</a-button>\n        <a-divider type=\"vertical\" />\n        <a-button v-if='roleType===\"admin\" && !record.json' @click='uploadJson(record)' type='link'>上传图谱</a-button>\n        <a-button v-else @click='viewJson(record)' :disabled='!record.json' type='link'>查看图谱</a-button>\n        <a-divider type=\"vertical\" />\n        <a-button @click='updateEvent(record)' type='link'>修改</a-button>\n        <a-divider type=\"vertical\" />\n        <a-button v-if='roleType===\"admin\"' @click=\"deleteEvent(record.id)\" type='link'>删除</a-button>\n      </span>\n    </a-table>\n    <a-pagination\n      style='margin-top: 20px;float: right'\n      :default-current=\"page_num\"\n      :total=\"total\"\n      @change=\"handlePageChange\" />\n    <a-modal\n      title=\"上传事件文件\"\n      v-model:visible=\"uploadModalVisible\"\n      :confirm-loading=\"confirmLoading\"\n      @ok=\"handleOk\"\n    >\n      <a-upload\n        v-model:file-list=\"fileList\"\n        name=\"file\"\n        :multiple=\"false\"\n        action=\"/api/event/upload\"\n        @change=\"handleChange\"\n      >\n        <a-button>\n          <upload-outlined></upload-outlined>\n          选择文件\n        </a-button>\n      </a-upload>\n    </a-modal>\n\n    <a-modal v-model:visible=\"updateModalVisible\" title=\"修改事件\" width='50%'>\n      <template #footer>\n        <a-button key=\"back\" @click=\"closeModal\">取消</a-button>\n        <a-button key=\"submit\" type=\"primary\" :loading=\"confirmLoading\" @click=\"submitForm\">提交</a-button>\n      </template>\n      <a-form :model=\"form\">\n        <a-form-item label=\"主题\">\n          <a-input v-model=\"form.name\" :disabled='true'/>\n        </a-form-item>\n        <a-form-item label=\"简介\">\n          <a-input type='textarea' v-model='form.introduction'></a-input>\n        </a-form-item>\n        <a-form-item label=\"过程\">\n          <a-input type='textarea' v-model='form.process'></a-input>\n        </a-form-item>\n        <a-form-item label='url'>\n          <a-input v-model='form.url'></a-input>\n        </a-form-item>\n        <a-form-item label='类型'>\n          <a-input v-model='form.type' :disable=\"true\"></a-input>\n        </a-form-item>\n      </a-form>\n    </a-modal>\n\n    <a-modal v-model:visible=\"bindModalVisible\" title=\"分配事件\" width='30%' height='60vh'>\n      <template #footer>\n        <a-button key=\"back\" @click=\"closeModal\">取消</a-button>\n        <a-button key=\"submit\" type=\"primary\" :loading=\"confirmLoading\" @click=\"submitBindForm\">提交</a-button>\n      </template>\n      <div style='height: 54vh;overflow: scroll'>\n        <a-checkbox-group v-model='userIDList'>\n          <a-checkbox style='display: block;margin-left: 8px;margin-top:12px' v-for='(item, index) in userList' :value='item.id'>{{item.name}}</a-checkbox>\n        </a-checkbox-group>\n      </div>\n    </a-modal>\n\n    <a-modal v-model:visible=\"updateJsonModalVisible\" title=\"上传json\" width='30%' height='60vh'>\n      <template #footer>\n        <a-button key=\"back\" @click=\"closeModal\">取消</a-button>\n        <a-button\n          key=\"submit\"\n          type=\"primary\"\n          :loading=\"confirmLoading\"\n          @click=\"submitUpdateJson\"\n        >提交</a-button>\n      </template>\n      <a-upload :file-list=\"fileList\" :remove=\"handleRemove\" :before-upload=\"convertJsonToEchartData\">\n        <a-button>\n          选择文件\n        </a-button>\n      </a-upload>\n    </a-modal>\n\n    <a-modal v-model:visible=\"viewJsonModalVisible\" title='查看图谱' width='80%' height='80%'>\n      <template #footer>\n        <a-button key=\"back\" @click=\"closeModal\">关闭</a-button>\n<!--        <a-button-->\n<!--          key=\"submit\"-->\n<!--          type=\"primary\"-->\n<!--          :loading=\"confirmLoading\"-->\n<!--          @click=\"submitUpdateJson\"-->\n<!--        >提交</a-button>-->\n      </template>\n      <div id=\"echarts\" style=\"height: 700px; width: 1500px\"></div>\n\n      <a-modal v-if='nodeForm' :title='nodeForm.name' v-model:visible=\"nodeModalVisible\" width='40%' height='40%'>\n        <template #footer>\n          <a-button key=\"back\" @click=\"closeNodeModal\">取消</a-button>\n          <a-button\n            key=\"submit\"\n            type=\"primary\"\n            :loading=\"confirmLoading\"\n            @click=\"submitUpdateNode\"\n          >提交</a-button>\n        </template>\n        <a-form labelAlign='left'>\n          <template v-for='key in Object.keys(nodeForm)'>\n            <a-form-item\n              v-if='[\"name\", \"x\", \"y\"].indexOf(key)===-1'\n              :labelCol='{span:8}'\n              :wrapperCol='{span: 14}'\n              :label='key'>\n              <a-input v-model='nodeForm[key]'></a-input>\n            </a-form-item>\n          </template>\n        </a-form>\n      </a-modal>\n    </a-modal>\n    </template>\n    <router-view v-else></router-view>\n  </div>\n",null]}