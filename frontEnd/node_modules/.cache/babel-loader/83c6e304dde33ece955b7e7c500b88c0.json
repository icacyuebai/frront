{"remainingRequest":"/Users/movi/Desktop/current/frontEnd/node_modules/babel-loader/lib/index.js!/Users/movi/Desktop/current/frontEnd/src/permission.js","dependencies":[{"path":"/Users/movi/Desktop/current/frontEnd/src/permission.js","mtime":1680068412000},{"path":"/Users/movi/Desktop/current/frontEnd/babel.config.js","mtime":1679456648000},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1651221196058},{"path":"/Users/movi/Desktop/current/frontEnd/node_modules/babel-loader/lib/index.js","mtime":1669512949620}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/movi/Desktop/current/frontEnd/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\nimport Vue from 'vue';\nimport router from '@/router';\nimport store from \"./store\";\nimport NProgress from 'nprogress'; // progress bar\nimport 'nprogress/nprogress.css'; // progress bar style\nimport notification from 'ant-design-vue/es/notification';\nimport { setDocumentTitle, domTitle } from '@/utils/domUtil';\nimport { ACCESS_TOKEN } from '@/store/mutation-types';\nNProgress.configure({\n  showSpinner: false\n}); // NProgress Configuration\n\nrouter.beforeEach( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(to, from, next) {\n    var token, json, role_type;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          NProgress.start(); // start progress bar\n          to.meta && typeof to.meta.title !== 'undefined' && setDocumentTitle(\"\".concat(to.meta.title, \" - \").concat(domTitle));\n          token = Vue.ls.get(ACCESS_TOKEN);\n          console.log(to.path);\n          if (!(to.path === '/user/login')) {\n            _context.next = 8;\n            break;\n          }\n          if (token) {\n            next({\n              name: \"Dashboard\"\n            });\n          } else {\n            next();\n          }\n          _context.next = 22;\n          break;\n        case 8:\n          if (!token) {\n            _context.next = 21;\n            break;\n          }\n          if (!(store.getters.addRouters.length === 0)) {\n            _context.next = 18;\n            break;\n          }\n          _context.next = 12;\n          return store.dispatch('set_router');\n        case 12:\n          json = store.getters.addRouters;\n          router.addRoutes(json);\n          role_type = store.getters.roleType;\n          next({\n            name: role_type === \"admin\" ? \"Dashboard\" : \"Event\",\n            replace: true\n          });\n          // next({name: \"Dashboard\", replace: true})\n          _context.next = 19;\n          break;\n        case 18:\n          next();\n        case 19:\n          _context.next = 22;\n          break;\n        case 21:\n          next({\n            path: \"/user/login\",\n            query: {\n              redirect: document.location.hash\n            }\n          });\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nrouter.afterEach(function () {\n  NProgress.done(); // finish progress bar\n});",{"version":3,"names":["Vue","router","store","NProgress","notification","setDocumentTitle","domTitle","ACCESS_TOKEN","configure","showSpinner","beforeEach","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","to","from","next","token","json","role_type","wrap","_callee$","_context","prev","start","meta","title","concat","ls","get","console","log","path","name","getters","addRouters","length","dispatch","addRoutes","roleType","replace","query","redirect","document","location","hash","stop","_x","_x2","_x3","apply","arguments","afterEach","done"],"sources":["/Users/movi/Desktop/current/frontEnd/src/permission.js"],"sourcesContent":["import Vue from 'vue'\nimport router from '@/router'\nimport store from './store'\nimport NProgress from 'nprogress' // progress bar\nimport 'nprogress/nprogress.css' // progress bar style\nimport notification from 'ant-design-vue/es/notification'\nimport { setDocumentTitle, domTitle } from '@/utils/domUtil'\nimport { ACCESS_TOKEN } from '@/store/mutation-types'\n\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\n\nrouter.beforeEach(async (to, from, next) => {\n  NProgress.start() // start progress bar\n  to.meta && (typeof to.meta.title !== 'undefined' && setDocumentTitle(`${to.meta.title} - ${domTitle}`))\n  const token = Vue.ls.get(ACCESS_TOKEN)\n  console.log(to.path)\n  if(to.path === '/user/login'){\n    if(token){\n      next({name: \"Dashboard\"})\n    }else{\n      next()\n    }\n  }else{\n    if(token){\n      if(store.getters.addRouters.length === 0){\n        await store.dispatch('set_router')\n        let json = store.getters.addRouters\n        router.addRoutes(json)\n        let role_type = store.getters.roleType\n        next({name: role_type===\"admin\"?\"Dashboard\":\"Event\" ,replace: true})\n        // next({name: \"Dashboard\", replace: true})\n      }else{\n        next()\n      }\n    }else{\n      next({\n        path: \"/user/login\",\n        query: {\n          redirect: document.location.hash\n        }\n      })\n    }\n  }\n})\n\nrouter.afterEach(() => {\n  NProgress.done() // finish progress bar\n})\n"],"mappings":";;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK;AACZ,OAAOC,SAAS,MAAM,WAAW,EAAC;AAClC,OAAO,yBAAyB,EAAC;AACjC,OAAOC,YAAY,MAAM,gCAAgC;AACzD,SAASC,gBAAgB,EAAEC,QAAQ,QAAQ,iBAAiB;AAC5D,SAASC,YAAY,QAAQ,wBAAwB;AAErDJ,SAAS,CAACK,SAAS,CAAC;EAAEC,WAAW,EAAE;AAAM,CAAC,CAAC,EAAC;;AAE5CR,MAAM,CAACS,UAAU;EAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAAC,SAAAC,QAAOC,EAAE,EAAEC,IAAI,EAAEC,IAAI;IAAA,IAAAC,KAAA,EAAAC,IAAA,EAAAC,SAAA;IAAA,OAAAR,kBAAA,CAAAS,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAN,IAAA;QAAA;UACrCf,SAAS,CAACuB,KAAK,EAAE,EAAC;UAClBV,EAAE,CAACW,IAAI,IAAK,OAAOX,EAAE,CAACW,IAAI,CAACC,KAAK,KAAK,WAAW,IAAIvB,gBAAgB,IAAAwB,MAAA,CAAIb,EAAE,CAACW,IAAI,CAACC,KAAK,SAAAC,MAAA,CAAMvB,QAAQ,EAAI;UACjGa,KAAK,GAAGnB,GAAG,CAAC8B,EAAE,CAACC,GAAG,CAACxB,YAAY,CAAC;UACtCyB,OAAO,CAACC,GAAG,CAACjB,EAAE,CAACkB,IAAI,CAAC;UAAA,MACjBlB,EAAE,CAACkB,IAAI,KAAK,aAAa;YAAAV,QAAA,CAAAN,IAAA;YAAA;UAAA;UAC1B,IAAGC,KAAK,EAAC;YACPD,IAAI,CAAC;cAACiB,IAAI,EAAE;YAAW,CAAC,CAAC;UAC3B,CAAC,MAAI;YACHjB,IAAI,EAAE;UACR;UAACM,QAAA,CAAAN,IAAA;UAAA;QAAA;UAAA,KAEEC,KAAK;YAAAK,QAAA,CAAAN,IAAA;YAAA;UAAA;UAAA,MACHhB,KAAK,CAACkC,OAAO,CAACC,UAAU,CAACC,MAAM,KAAK,CAAC;YAAAd,QAAA,CAAAN,IAAA;YAAA;UAAA;UAAAM,QAAA,CAAAN,IAAA;UAAA,OAChChB,KAAK,CAACqC,QAAQ,CAAC,YAAY,CAAC;QAAA;UAC9BnB,IAAI,GAAGlB,KAAK,CAACkC,OAAO,CAACC,UAAU;UACnCpC,MAAM,CAACuC,SAAS,CAACpB,IAAI,CAAC;UAClBC,SAAS,GAAGnB,KAAK,CAACkC,OAAO,CAACK,QAAQ;UACtCvB,IAAI,CAAC;YAACiB,IAAI,EAAEd,SAAS,KAAG,OAAO,GAAC,WAAW,GAAC,OAAO;YAAEqB,OAAO,EAAE;UAAI,CAAC,CAAC;UACpE;UAAAlB,QAAA,CAAAN,IAAA;UAAA;QAAA;UAEAA,IAAI,EAAE;QAAA;UAAAM,QAAA,CAAAN,IAAA;UAAA;QAAA;UAGRA,IAAI,CAAC;YACHgB,IAAI,EAAE,aAAa;YACnBS,KAAK,EAAE;cACLC,QAAQ,EAAEC,QAAQ,CAACC,QAAQ,CAACC;YAC9B;UACF,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAvB,QAAA,CAAAwB,IAAA;MAAA;IAAA,GAAAjC,OAAA;EAAA,CAGP;EAAA,iBAAAkC,EAAA,EAAAC,GAAA,EAAAC,GAAA;IAAA,OAAAxC,IAAA,CAAAyC,KAAA,OAAAC,SAAA;EAAA;AAAA,IAAC;AAEFpD,MAAM,CAACqD,SAAS,CAAC,YAAM;EACrBnD,SAAS,CAACoD,IAAI,EAAE,EAAC;AACnB,CAAC,CAAC"}]}